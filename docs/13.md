# 인터셉터 - 요청/응답 컨트롤

## 13.1 인터셉터란

요청과 응답을 가로채서 변형을 가할 수 있는 컴포넌트이다. AOP에서 많은 영향을 받았다.

인터셉터로는 아래 기능을 수행할 수 있다:

- 메소드 실행 전/후 추가 로직 바인딩
- 함수에서 반환된 결과를 변환
- 함수에서 던져진 예외를 변환
- 기본 기능의 동작 확장
    - 여러 미들웨어를 조합할 수 있음
    - 다음 미들웨어에 제어권을 넘기지 않고 요청/응답 주기를 끝낼 수 있음
- 특정 조건에 따라 기능을 재정의(E.g., 캐싱)

인터셉터는 미들웨어와 수행하는 일은 비슷하지만, 수행 시점이 다르다.

- 미들웨어의 실행시점: 요청이 라우트 핸들러로 전달되기 전 동작
- 인터셉터의 실행시점: 요청에 대한 라우트 핸들러의 처리 전/후 호출되어 요청/응답을 다룰 수 있음

### 예시를 통해 살펴보기

라우트 핸들러 요청 전/후에 로그를 남겨보자. 이를 위해 `LoggingInterceptor` 를 생성한다.

- 모듈 생성

> `nest g mo logging` -> `exception` 모듈 생성

- 코드 상세

> `src/logging/logging.interceptor.ts`

```ts
```

## 13.2 응답과 에외 매핑

...

## 13.3 유저 서비스에 인터셉터 적용하기

...

## 요청 생명주기